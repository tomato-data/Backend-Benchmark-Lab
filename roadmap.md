# Backend-Benchmark-Lab Roadmap

> í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™© ì¶”ì  ë° í–¥í›„ ê³„íš

---

## Phase 1: ê¸°ë³¸ ì¸í”„ë¼ âœ… ì™„ë£Œ

- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„
- [x] Docker Compose í™˜ê²½ êµ¬ì„±
- [x] PostgreSQL + ì´ˆê¸° ìŠ¤í‚¤ë§ˆ
- [x] k6 ë²¤ì¹˜ë§ˆí¬ ê¸°ë³¸ ì„¤ì •
- [x] ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ (Prometheus + Grafana + cAdvisor)

---

## Phase 2: Basic ì‹œë‚˜ë¦¬ì˜¤ (01-08) âœ… ì™„ë£Œ

í”„ë ˆì„ì›Œí¬ ê°„ ì„±ëŠ¥ ë¹„êµë¥¼ ìœ„í•œ ê¸°ë³¸ ì‹œë‚˜ë¦¬ì˜¤

| #   | ì‹œë‚˜ë¦¬ì˜¤         | ì„¤ëª…                               | ìƒíƒœ |
| --- | ---------------- | ---------------------------------- | ---- |
| 01  | lightweight      | Health check (í”„ë ˆì„ì›Œí¬ ì˜¤ë²„í—¤ë“œ) | âœ…   |
| 02  | json-payload     | JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”               | âœ…   |
| 03  | db-read          | ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (SELECT)          | âœ…   |
| 04  | db-write         | ì‚¬ìš©ì ìƒì„± (INSERT)               | âœ…   |
| 05  | external-api     | ì™¸ë¶€ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜           | âœ…   |
| 06  | middleware-chain | ì¸ì¦ + ë¡œê¹… ë¯¸ë“¤ì›¨ì–´               | âœ…   |
| 07  | file-upload      | íŒŒì¼ ì—…ë¡œë“œ                        | âœ…   |
| 08  | concurrent-mixed | í˜¼í•© ì›Œí¬ë¡œë“œ                      | âœ…   |

---

## Phase 3: í”„ë ˆì„ì›Œí¬ êµ¬í˜„

### Python âœ… ì™„ë£Œ

| í”„ë ˆì„ì›Œí¬ | ì•„í‚¤í…ì²˜                    | ìƒíƒœ    | ë²¤ì¹˜ë§ˆí¬ |
| ---------- | --------------------------- | ------- | -------- |
| FastAPI    | Pragmatic                   | âœ… ì™„ë£Œ | âœ… ì™„ë£Œ  |
| FastAPI    | Strict (Clean Architecture) | âœ… ì™„ë£Œ | âœ… ì™„ë£Œ  |
| Django     | DRF ViewSet                 | âœ… ì™„ë£Œ | âœ… ì™„ë£Œ  |
| Flask      | -                           | â³ ì˜ˆì • | -        |

### TypeScript (Node.js) â³ ì˜ˆì •

| í”„ë ˆì„ì›Œí¬ | ìƒíƒœ    |
| ---------- | ------- |
| Express    | â³ ì˜ˆì • |
| Fastify    | â³ ì˜ˆì • |
| NestJS     | â³ ì˜ˆì • |

### Go â³ ì˜ˆì •

| í”„ë ˆì„ì›Œí¬ | ìƒíƒœ    |
| ---------- | ------- |
| Fiber      | â³ ì˜ˆì • |
| Gin        | â³ ì˜ˆì • |

---

## Phase 4: ì‹œë‚˜ë¦¬ì˜¤ ë””ë ‰í† ë¦¬ ì¬êµ¬ì„± âœ… ì™„ë£Œ

```
scenarios/
â”œâ”€â”€ basic/           # ê¸°ì¡´ 01-08 ì´ë™ âœ…
â”œâ”€â”€ db-advanced/     # DB ìµœì í™” ì‹œë‚˜ë¦¬ì˜¤
â”œâ”€â”€ caching/         # ìºì‹± ì‹œë‚˜ë¦¬ì˜¤
â”œâ”€â”€ real-world/      # ì‹¤ì œ ì„œë¹„ìŠ¤ íŒ¨í„´
â””â”€â”€ stress/          # ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸
```

- [x] ê¸°ì¡´ 01-08 ì‹œë‚˜ë¦¬ì˜¤ë¥¼ `basic/`ìœ¼ë¡œ ì´ë™
- [x] runner ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ ìˆ˜ì • (`run-benchmark.sh`)
- [ ] ì¹´í…Œê³ ë¦¬ë³„ runner ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ (í–¥í›„)

---

## Phase 5: DB ì‹¬í™” ì‹œë‚˜ë¦¬ì˜¤ (db-advanced) ğŸ”„ ì§„í–‰ ì¤‘

> ëŒ€ìƒ: ëª¨ë“  í”„ë ˆì„ì›Œí¬ (pragmatic, strict, django, ...)
>
> **ì°¸ê³ **: ëœë¤ ì ‘ê·¼ íŒ¨í„´ìœ¼ë¡œ PostgreSQL Buffer Cache ì˜í–¥ ìµœì†Œí™”. ìºì‹± íš¨ê³¼ ë¹„êµëŠ” ë§ˆì§€ë§‰ ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ cold/warm 2ë²„ì „ìœ¼ë¡œ ì¸¡ì • ì˜ˆì •.

| #   | ì‹œë‚˜ë¦¬ì˜¤           | ì„¤ëª…                                  | ìƒíƒœ    |
| --- | ------------------ | ------------------------------------- | ------- |
| 09  | db-pagination      | OFFSET vs Cursor í˜ì´ì§€ë„¤ì´ì…˜         | âœ… ì™„ë£Œ |
| 10  | db-column-overhead | ì»¬ëŸ¼ ìˆ˜ + ë°ì´í„° íƒ€ì…ë³„ ì¡°íšŒ ì˜¤ë²„í—¤ë“œ | â³ ì˜ˆì • |
| 11  | db-n-plus-one      | N+1 ë¬¸ì œ (lazy vs eager loading)      | â³ ì˜ˆì •    |
| 12  | db-bulk-operations | ëŒ€ëŸ‰ INSERT/UPDATE (1000ê±´+)          | â³ ì˜ˆì •    |
| 13  | db-transactions    | ë³µí•© íŠ¸ëœì­ì…˜ (ë½ ê²½í•©)               | â³ ì˜ˆì •    |

### 09-db-pagination ìƒì„¸ âœ… ì™„ë£Œ

OFFSET vs Cursor í˜ì´ì§€ë„¤ì´ì…˜ ì„±ëŠ¥ ë¹„êµ

- **í…Œì´ë¸”**: `users` (100,000ê±´) - ê¸°ì¡´ í…Œì´ë¸” í†µí•©
- **Cursor ê¸°ì¤€**: `id` (PK) - ì‹¤ë¬´ì—ì„œëŠ” `created_at + id` Base64 ì¸ì½”ë”© ì‚¬ìš©
- **í•µì‹¬**: OFFSETì€ ë’¤ìª½ í˜ì´ì§€ì¼ìˆ˜ë¡ ëŠë¦¼ (O(offset+limit)) vs CursorëŠ” ì¼ì • (O(limit))
- **ê²°ê³¼**: Cursorê°€ OFFSET ëŒ€ë¹„ **1.7ë°° ë¹ ë¦„** (p95 ê¸°ì¤€: 34ms vs 60ms)

| ì‘ì—…                         | ìƒíƒœ    |
| ---------------------------- | ------- |
| DB ìŠ¤í‚¤ë§ˆ (100,000ê±´ ì‹œë“œ)   | âœ… ì™„ë£Œ |
| Pydantic ìŠ¤í‚¤ë§ˆ              | âœ… ì™„ë£Œ |
| ë¼ìš°í„° êµ¬í˜„ (offset, cursor) | âœ… ì™„ë£Œ |
| k6 ì‹œë‚˜ë¦¬ì˜¤                  | âœ… ì™„ë£Œ |
| ë¬¸ì„œí™” (`docs/15`)           | âœ… ì™„ë£Œ |

### 10-db-column-overhead ìƒì„¸

ì»¬ëŸ¼ ìˆ˜ ë° ë°ì´í„° íƒ€ì…ì— ë”°ë¥¸ ì¡°íšŒ ì˜¤ë²„í—¤ë“œ ì¸¡ì •

#### A. ì»¬ëŸ¼ ìˆ˜ ë¹„êµ

| í…Œì´ë¸”             | ì»¬ëŸ¼ ìˆ˜ | ì˜ˆìƒ ì„±ëŠ¥       |
| ------------------ | ------- | --------------- |
| `users_narrow`     | 5ê°œ     | ê°€ì¥ ë¹ ë¦„       |
| `users_wide`       | 20ê°œ    | 1.5~2x ëŠë¦¼     |
| `users_extra_wide` | 50ê°œ    | 2~3x ëŠë¦¼       |
| `users_wide` (5ê°œ SELECT) | 20ê°œ ì¤‘ 5ê°œ | Narrowì™€ ìœ ì‚¬ |

#### B. ë°ì´í„° íƒ€ì…ë³„ ë¹„êµ (ê° 20ê°œ ì»¬ëŸ¼)

| í…Œì´ë¸”                 | íƒ€ì…      | ì˜ˆìƒ ìˆœìœ„         |
| ---------------------- | --------- | ----------------- |
| `users_type_int`       | INTEGER   | 1ìœ„ (ê°€ì¥ ë¹ ë¦„)   |
| `users_type_timestamp` | TIMESTAMP | 2ìœ„               |
| `users_type_uuid`      | UUID      | 3ìœ„               |
| `users_type_varchar`   | VARCHAR   | 4ìœ„               |
| `users_type_text`      | TEXT      | 5ìœ„               |
| `users_type_jsonb`     | JSONB     | 6ìœ„ (ê°€ì¥ ëŠë¦¼)   |

**í•™ìŠµ í¬ì¸íŠ¸**:
- `SELECT *` í”¼í•˜ê¸°
- ORM ê¸°ë³¸ ë™ì‘ (ì „ì²´ ì»¬ëŸ¼ ë¡œë“œ) ì£¼ì˜
- **Projection**ì˜ ì¤‘ìš”ì„±
- **JSONBëŠ” í¸ë¦¬í•˜ì§€ë§Œ ë¹„ìš©ì´ í¼**

---

## Phase 6: ìºì‹± ì‹œë‚˜ë¦¬ì˜¤ (caching) â³ ì˜ˆì •

> DB Buffer Cache (Phase 5)ì™€ì˜ ë¹„êµ í¬ì¸íŠ¸:
> - Phase 5: DB ë ˆë²¨ ìºì‹± (PostgreSQL Buffer Cache)
> - Phase 6: ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ ìºì‹± (Redis)

| #   | ì‹œë‚˜ë¦¬ì˜¤      | ì„¤ëª…                       | ìƒíƒœ |
| --- | ------------- | -------------------------- | ---- |
| 14  | cache-hit     | Redis ìºì‹œ íˆíŠ¸            | â³   |
| 15  | cache-miss-db | ìºì‹œ ë¯¸ìŠ¤ â†’ DB â†’ ìºì‹œ ì €ì¥ | â³   |

---

## Phase 7: ì‹¤ì œ ì„œë¹„ìŠ¤ íŒ¨í„´ (real-world) â³ ì˜ˆì •

> ëŒ€ìƒ: ëª¨ë“  í”„ë ˆì„ì›Œí¬ (ì•„í‚¤í…ì²˜ ì°¨ì´ê°€ ë“œëŸ¬ë‚˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤)

| #   | ì‹œë‚˜ë¦¬ì˜¤        | ì„¤ëª…                             | ìƒíƒœ |
| --- | --------------- | -------------------------------- | ---- |
| 16  | auth-jwt        | JWT ìƒì„±/ê²€ì¦ ì˜¤ë²„í—¤ë“œ           | â³   |
| 17  | aggregation     | ì§‘ê³„ ì¿¼ë¦¬ (COUNT, SUM, GROUP BY) | â³   |
| 18  | search          | í…ìŠ¤íŠ¸ ê²€ìƒ‰ (LIKE vs Full-text)  | â³   |
| 19  | real-world-flow | ì¸ì¦â†’ì¡°íšŒâ†’ìˆ˜ì •â†’ì‘ë‹µ E2E          | â³   |

---

## Phase 8: ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ (stress) â³ ì˜ˆì •

| #   | ì‹œë‚˜ë¦¬ì˜¤      | ì„¤ëª…                                 | ìƒíƒœ |
| --- | ------------- | ------------------------------------ | ---- |
| 20  | spike-traffic | íŠ¸ë˜í”½ ê¸‰ì¦ (10â†’100â†’10 VUs)          | â³   |
| 21  | long-running  | ì¥ì‹œê°„ ë¶€í•˜ (5ë¶„+), ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íƒì§€ | â³   |

---

## Phase 9: ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ (cold/warm ë¹„êµ) â³ ì˜ˆì •

> DB Buffer Cache + Redis Cache íš¨ê³¼ë¥¼ ê·¹ì ìœ¼ë¡œ ë¹„êµ

| ì‹œë‚˜ë¦¬ì˜¤            | ì„¤ëª…                         |
| ------------------- | ---------------------------- |
| 22-mixed-cold       | ì„œë²„ ì¬ì‹œì‘ í›„ ì²« ì‹¤í–‰       |
| 22-mixed-warm       | ë™ì¼ ìš”ì²­ ë°˜ë³µ í›„ ì‹¤í–‰       |

**ì¸¡ì • í¬ì¸íŠ¸**:
- PostgreSQL Buffer Cache ì›Œë°ì—… íš¨ê³¼
- Redis ìºì‹œ íˆíŠ¸ìœ¨ ë³€í™”
- ì „ì²´ ì‘ë‹µ ì‹œê°„ ì°¨ì´

---

## Phase 10: Variant ì‹¤í—˜ â³ ì˜ˆì •

### FastAPI

- [ ] SQLAlchemy vs Raw asyncpg
- [ ] Pydantic vs msgspec
- [ ] Uvicorn vs Gunicorn+Uvicorn

### Django

- [ ] sync vs async
- [ ] ViewSet vs APIView
- [ ] ORM vs Raw SQL

### ê³µí†µ

- [ ] ì›Œì»¤ ìˆ˜ ì‹¤í—˜: 1, 2, 4, 8, (2\*CPU+1)
- [ ] ì»¤ë„¥ì…˜ í’€ í¬ê¸°: 5, 10, 20, 50

---

## ì™„ë£Œëœ ì£¼ìš” ì„±ê³¼

### ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ (2024-12)

| ë¹„êµ                         | ê²°ê³¼                             |
| ---------------------------- | -------------------------------- |
| FastAPI vs Django (ê²½ëŸ‰ API) | FastAPI **7~9ë°°** ë¹ ë¦„           |
| FastAPI vs Django (DB ì½ê¸°)  | Django **1.6ë°°** ë¹ ë¦„            |
| FastAPI vs Django (í˜¼í•©)     | FastAPI **1.4ë°°** ë¹ ë¦„           |
| Pragmatic vs Strict          | ê²½ëŸ‰ APIì—ì„œ **10~17%** ì˜¤ë²„í—¤ë“œ |

ìƒì„¸: `docs/99-benchmark-results.md`, `docs/DISCOVERIES.md`

---

## ë¬¸ì„œí™”

| ë¬¸ì„œ                  | ë‚´ìš©                              |
| --------------------- | --------------------------------- |
| `docs/01-05`          | ì¸í”„ë¼ + ì´ˆê¸° ì„¤ì •                |
| `docs/06-10`          | ì‹œë‚˜ë¦¬ì˜¤ ìƒì„¸                     |
| `docs/11`             | ë²¤ì¹˜ë§ˆí¬ ìë™í™”                   |
| `docs/12`             | Django êµ¬í˜„ ê°€ì´ë“œ                |
| `docs/13`             | ëª¨ë‹ˆí„°ë§                          |
| `docs/14`             | FastAPI Strict Clean Architecture |
| `docs/15`             | DB Pagination (OFFSET vs Cursor)  |
| `docs/99`             | ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµí‘œ              |
| `docs/DISCOVERIES.md` | êµí›ˆ ë° ì¸ì‚¬ì´íŠ¸                  |

---

_Last updated: 2026-01-01_
